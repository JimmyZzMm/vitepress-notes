# 体验卡

## 逻辑

### 领取弹窗

- 控制打开时机

	- useExpCardModal

		- 完成一次对话（收到回复完成后）

			- useQueryCompleted

		- 发送一次重复query后（一次使用过程中，发送完重复query后发放）

			- useRepeatQuery

		- 点击一次停止生成后（点击停止生成后立即触发）

			- useStopGen

		- 点击一次重新生成后（点击重新生成后立即触发）

			- useRetry

		- 当日首次点踩（点击“👎”并反馈后）

			- useFeedbackClosed

	- useModalVisible

		- 来到官网（来到官网后并且用户信息加载完毕即触发弹窗）

			- ModalType.VIP_CARD

- 打开方法

	- openExpCard

### 领取成功弹窗

- 控制打开时机

	- 领取成功后第一次访问

		- useExpReceivedCard

- 打开方法

	- openReceivedCard

### 即将过期弹窗

- 控制打开时机

	- 为体验会员，且过期时间小于24小时

		- useExpExpireCard

- 打开方法

	- openExpireCard（pc）

	- ExpExpireTip（wise）

### 已过期弹窗

- 控制打开时机

	- 为体验会员，且会员已过期

		- useExpExpiredCard

- 打开方法

	- openExpiredCard

## 视图

### 容器组件

- ExpCardModal

- notification

### 展示组件

- ExpCard

	- 老体验卡视图，即notification视图

- NewExpCard

	- 新体验卡视图，即modal视图

- ExpExpireTip

	- wise端tip形式的弹窗

## 相关接口

### /eb/activityCard/popup

- 获取需要进行弹窗的活动卡id

### /eb/activityCard/info

- 根据卡id获取卡信息

## 相关文件

### src\pages\eb-chat\common\vipExpCard

